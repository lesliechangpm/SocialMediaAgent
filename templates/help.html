{% extends "base.html" %}

{% block title %}Help & Documentation - Social Media Agent{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="h3 mb-0">
                    <i class="fas fa-question-circle text-primary me-2"></i>Help & Documentation
                </h1>
                <p class="text-muted mb-0">Everything you need to know about the Social Media Agent</p>
            </div>
            <div>
                <button class="btn btn-outline-primary" onclick="searchHelp()">
                    <i class="fas fa-search me-2"></i>Search Help
                </button>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Help Navigation -->
    <div class="col-lg-3">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="fas fa-list me-2"></i>Quick Navigation
                </h6>
            </div>
            <div class="list-group list-group-flush">
                <a href="#getting-started" class="list-group-item list-group-item-action">
                    <i class="fas fa-play-circle me-2"></i>Getting Started
                </a>
                <a href="#content-generation" class="list-group-item list-group-item-action">
                    <i class="fas fa-magic me-2"></i>Content Generation
                </a>
                <a href="#platform-guide" class="list-group-item list-group-item-action">
                    <i class="fas fa-share-alt me-2"></i>Platform Guide
                </a>
                <a href="#audience-targeting" class="list-group-item list-group-item-action">
                    <i class="fas fa-users me-2"></i>Audience Targeting
                </a>
                <a href="#settings" class="list-group-item list-group-item-action">
                    <i class="fas fa-cog me-2"></i>Settings & Configuration
                </a>
                <a href="#troubleshooting" class="list-group-item list-group-item-action">
                    <i class="fas fa-wrench me-2"></i>Troubleshooting
                </a>
                <a href="#api" class="list-group-item list-group-item-action">
                    <i class="fas fa-code me-2"></i>API Reference
                </a>
            </div>
        </div>
    </div>

    <!-- Help Content -->
    <div class="col-lg-9">
        <!-- Getting Started -->
        <div id="getting-started" class="help-section">
            <h3><i class="fas fa-play-circle me-2"></i>Getting Started</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <h5>Welcome to Social Media Agent</h5>
                    <p>Your AI-powered social media content generator for mortgage professionals. Follow these steps to get started:</p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card border-primary">
                                <div class="card-body">
                                    <h6 class="text-primary">Step 1: Configure API</h6>
                                    <p class="small">Go to Settings and add your Anthropic API key to enable AI content generation.</p>
                                    <a href="/settings" class="btn btn-sm btn-primary">Go to Settings</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card border-info">
                                <div class="card-body">
                                    <h6 class="text-info">Step 2: Set Branding</h6>
                                    <p class="small">Update your personal information including name, company, and location for personalized content.</p>
                                    <a href="/settings" class="btn btn-sm btn-info">Update Profile</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card border-success">
                                <div class="card-body">
                                    <h6 class="text-success">Step 3: Generate Content</h6>
                                    <p class="small">Choose your platform, audience, and content type to generate AI-powered posts.</p>
                                    <a href="/generate" class="btn btn-sm btn-success">Start Creating</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card border-warning">
                                <div class="card-body">
                                    <h6 class="text-warning">Step 4: Track Performance</h6>
                                    <p class="small">Monitor your content performance and optimize your social media strategy.</p>
                                    <a href="/analytics" class="btn btn-sm btn-warning">View Analytics</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Generation -->
        <div id="content-generation" class="help-section">
            <h3><i class="fas fa-magic me-2"></i>Content Generation</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <h5>How AI Content Generation Works</h5>
                    <p>Our AI system creates personalized social media content based on current mortgage rates and market conditions.</p>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-info-circle me-2"></i>Content Types Available:</h6>
                        <ul class="mb-0">
                            <li><strong>Educational:</strong> Teaching content about mortgage processes, tips for buyers</li>
                            <li><strong>Market Update:</strong> Current rates, trends, and market analysis</li>
                            <li><strong>Promotional:</strong> Showcasing your services and expertise</li>
                        </ul>
                    </div>
                    
                    <h6>Generation Process:</h6>
                    <ol>
                        <li>Select your target platform (Instagram, Facebook, LinkedIn)</li>
                        <li>Choose your audience demographic</li>
                        <li>Pick content type and add custom focus if needed</li>
                        <li>Click "Generate AI Content" and wait for results</li>
                        <li>Copy, edit, or generate variations as needed</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Platform Guide -->
        <div id="platform-guide" class="help-section">
            <h3><i class="fas fa-share-alt me-2"></i>Platform Guide</h3>
            <div class="row">
                <div class="col-md-4">
                    <div class="card mb-3">
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0"><i class="fab fa-instagram me-2"></i>Instagram</h6>
                        </div>
                        <div class="card-body">
                            <p><strong>Best for:</strong> Visual content, younger demographics</p>
                            <p><strong>Character limit:</strong> 2,200 (optimal: 350)</p>
                            <p><strong>Hashtag limit:</strong> 30</p>
                            <p><strong>Tips:</strong> Use engaging visuals, stories, and strategic hashtags</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-3">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0"><i class="fab fa-facebook me-2"></i>Facebook</h6>
                        </div>
                        <div class="card-body">
                            <p><strong>Best for:</strong> Community building, detailed explanations</p>
                            <p><strong>Character limit:</strong> 63,206 (optimal: 500)</p>
                            <p><strong>Hashtag limit:</strong> 30</p>
                            <p><strong>Tips:</strong> Encourage discussion, use questions, share stories</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-3">
                        <div class="card-header bg-success text-white">
                            <h6 class="mb-0"><i class="fab fa-linkedin me-2"></i>LinkedIn</h6>
                        </div>
                        <div class="card-body">
                            <p><strong>Best for:</strong> Professional content, B2B networking</p>
                            <p><strong>Character limit:</strong> 3,000 (optimal: 700)</p>
                            <p><strong>Hashtag limit:</strong> 20</p>
                            <p><strong>Tips:</strong> Professional tone, industry insights, thought leadership</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audience Targeting -->
        <div id="audience-targeting" class="help-section">
            <h3><i class="fas fa-users me-2"></i>Audience Targeting</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <p>Our system includes detailed audience profiles to help you create targeted content:</p>
                    
                    <div class="accordion" id="audienceAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="millennialsHeader">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#millennialsCollapse">
                                    Millennials (Ages 27-42)
                                </button>
                            </h2>
                            <div id="millennialsCollapse" class="accordion-collapse collapse show" data-bs-parent="#audienceAccordion">
                                <div class="accordion-body">
                                    <strong>Focus:</strong> First-time buyers, affordability, transparency<br>
                                    <strong>Platforms:</strong> Instagram, Facebook<br>
                                    <strong>Content Style:</strong> Visual, educational, authentic<br>
                                    <strong>Key Topics:</strong> Down payment assistance, first-time buyer programs, rate comparisons
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="genxHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#genxCollapse">
                                    Generation X (Ages 43-58)
                                </button>
                            </h2>
                            <div id="genxCollapse" class="accordion-collapse collapse" data-bs-parent="#audienceAccordion">
                                <div class="accordion-body">
                                    <strong>Focus:</strong> Refinancing, wealth building, family needs<br>
                                    <strong>Platforms:</strong> Facebook, LinkedIn<br>
                                    <strong>Content Style:</strong> Practical, results-oriented, detailed<br>
                                    <strong>Key Topics:</strong> Refinancing benefits, home equity, investment properties
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="boomersHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#boomersCollapse">
                                    Baby Boomers (Ages 59-77)
                                </button>
                            </h2>
                            <div id="boomersCollapse" class="accordion-collapse collapse" data-bs-parent="#audienceAccordion">
                                <div class="accordion-body">
                                    <strong>Focus:</strong> Security, stability, professional relationships<br>
                                    <strong>Platforms:</strong> LinkedIn, Facebook<br>
                                    <strong>Content Style:</strong> Professional, detailed, trust-building<br>
                                    <strong>Key Topics:</strong> Reverse mortgages, downsizing, retirement planning
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="genalphaHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#genalphaCollapse">
                                    Generation Alpha (Ages 0-15)
                                </button>
                            </h2>
                            <div id="genalphaCollapse" class="accordion-collapse collapse" data-bs-parent="#audienceAccordion">
                                <div class="accordion-body">
                                    <strong>Focus:</strong> Future planning, sustainability, technology integration<br>
                                    <strong>Platforms:</strong> TikTok, YouTube Shorts, Instagram Reels<br>
                                    <strong>Content Style:</strong> Interactive, visual, mobile-first, authentic<br>
                                    <strong>Key Topics:</strong> Financial education, smart homes, sustainable housing, future market trends
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings -->
        <div id="settings" class="help-section">
            <h3><i class="fas fa-cog me-2"></i>Settings & Configuration</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <h5>API Configuration</h5>
                    <p>To use AI content generation, you need an Anthropic API key:</p>
                    <ol>
                        <li>Visit <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a></li>
                        <li>Create an account and generate an API key</li>
                        <li>Go to Settings → AI Configuration</li>
                        <li>Enter your API key and test the connection</li>
                    </ol>
                    
                    <div class="alert alert-warning mt-3">
                        <h6><i class="fas fa-exclamation-triangle me-2"></i>API Key Security</h6>
                        <p class="mb-0">Your API key is stored locally and never shared. Keep it secure and don't share it with others.</p>
                    </div>
                    
                    <h5 class="mt-4">Personal Branding</h5>
                    <p>Update your profile information to personalize generated content:</p>
                    <ul>
                        <li><strong>Loan Officer Name:</strong> Your full name for content attribution</li>
                        <li><strong>Company Name:</strong> Your mortgage company</li>
                        <li><strong>Location:</strong> Your service area</li>
                        <li><strong>NMLS ID:</strong> Your licensing number (optional)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div id="troubleshooting" class="help-section">
            <h3><i class="fas fa-wrench me-2"></i>Troubleshooting</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Common Issues</h6>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <strong>Content generation fails</strong>
                                    <p class="mb-1 small">Check your API key configuration and internet connection</p>
                                </div>
                                <div class="list-group-item">
                                    <strong>Slow loading times</strong>
                                    <p class="mb-1 small">AI generation takes 10-30 seconds depending on complexity</p>
                                </div>
                                <div class="list-group-item">
                                    <strong>Rate data not updating</strong>
                                    <p class="mb-1 small">Rate data refreshes every 30 minutes automatically</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>System Requirements</h6>
                            <ul>
                                <li>Modern web browser (Chrome, Firefox, Safari, Edge)</li>
                                <li>Internet connection for AI generation</li>
                                <li>Valid Anthropic API key</li>
                                <li>JavaScript enabled</li>
                            </ul>
                            
                            <h6 class="mt-3">Performance Tips</h6>
                            <ul>
                                <li>Use specific custom focus for better results</li>
                                <li>Generate variations for A/B testing</li>
                                <li>Review and edit generated content</li>
                                <li>Include current rates for better engagement</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Reference -->
        <div id="api" class="help-section">
            <h3><i class="fas fa-code me-2"></i>API Reference</h3>
            <div class="card mb-4">
                <div class="card-body">
                    <p>For developers who want to integrate with the Social Media Agent:</p>
                    
                    <h6>Available Endpoints</h6>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Endpoint</th>
                                    <th>Method</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/api/generate</code></td>
                                    <td><span class="badge bg-success">POST</span></td>
                                    <td>Generate single content piece</td>
                                </tr>
                                <tr>
                                    <td><code>/api/variations</code></td>
                                    <td><span class="badge bg-success">POST</span></td>
                                    <td>Generate multiple variations</td>
                                </tr>
                                <tr>
                                    <td><code>/api/rates</code></td>
                                    <td><span class="badge bg-primary">GET</span></td>
                                    <td>Get current mortgage rates</td>
                                </tr>
                                <tr>
                                    <td><code>/api/audiences</code></td>
                                    <td><span class="badge bg-primary">GET</span></td>
                                    <td>Get audience profiles</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
function searchHelp() {
    const query = prompt('What would you like to search for?');
    if (query) {
        // Simple search implementation
        const sections = document.querySelectorAll('.help-section');
        let found = false;
        
        sections.forEach(section => {
            const text = section.textContent.toLowerCase();
            if (text.includes(query.toLowerCase())) {
                section.scrollIntoView({ behavior: 'smooth' });
                section.classList.add('bg-warning', 'p-3', 'rounded');
                setTimeout(() => {
                    section.classList.remove('bg-warning', 'p-3', 'rounded');
                }, 3000);
                found = true;
                return;
            }
        });
        
        if (!found) {
            SocialMediaAgent.showToast(`No results found for "${query}"`, 'warning');
        }
    }
}

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %}